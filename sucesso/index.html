<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento Aprovado!</title>
    
    <!-- Cor de Tema do Navegador -->
    <meta name="theme-color" content="#16a34a">

    <!-- FAVICONS E ÍCONES DE APLICATIVO -->
    <link rel="icon" href="images/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="images/favicon-96x96.png" type="image/png" sizes="96x96">
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="manifest" href="images/site.webmanifest">

    <!-- Nosso CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <main class="container">
      <!-- Spinner de Carregamento -->
<div id="loading-spinner" class="loading-spinner" aria-hidden="false">
    <div class="spinner"></div>
    <p>Carregando dados da sua compra...</p>
</div>

<!-- Área de Mensagem de Erro (inicialmente escondida) -->
<div id="error-message" class="error-message hidden" role="alert">
    <i class="fas fa-exclamation-triangle"></i>
    <p>Não foi possível carregar os dados da sua compra. Por favor, tente recarregar a página.</p>
</div>
        <div class="success-card">
            <!-- Conteúdo Principal (inicialmente escondido) -->
            <div id="main-content" class="hidden">
                <header class="success-card__header">
                   <p class="success-card__subtitle">
                        Pedido: <strong id="transaction-id">#XXXXXX</strong>
                    </p>
                    <hr>
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h1 class="success-card__title">Compra aprovada com sucesso!</h1>
                   
                </header>

                <section class="cta-section">
                    <div class="cta-box">
                        <p class="cta-box__text">Acessar área de membros:</p>
                        <a id="member-area-link" href="#" class="btn btn--primary btn--pulse" target="_blank">
                            <i class="fas fa-arrow-right"></i>
                            Acessar agora
                        </a>
                        <p class="cta-box__subtext">Seu acesso será liberado em menos de 1 minuto!</p>
                    </div>
                </section>

                <section class="details-section">
                    <div class="info-grid">
                        <div class="info-grid__column">
                            <div class="info-box">
                                <h2 class="info-box__title">Dados do Cliente</h2>
                                <div class="info-item">
                                    <span class="info-item__label">Nome:</span>
                                    <span id="customer-name" class="info-item__value">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-item__label">E-mail:</span>
                                    <span id="customer-email" class="info-item__value">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-item__label">Telefone:</span>
                                    <span id="customer-phone" class="info-item__value">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="info-grid__column">
                            <div class="info-box">
                                <h2 class="info-box__title">Detalhes da Compra</h2>
                                <div class="product-item">
                                    <img id="product-image" src="https://placehold.co/200x200/4F46E5/FFFFFF?font=montserrat&text=AG" alt="Produto" class="product-item__image">
                                    <div class="product-item__details">
                                        <h3 id="product-name" class="product-item__name">Nome do Produto</h3>
                                        <p id="product-description" class="product-item__description">Descrição da oferta</p>
                                    </div>
                                    <p id="product-price" class="product-item__price">R$ 0,00</p>
                                </div>
                                <div class="price-summary">
                                    <div class="price-summary__row">
                                        <span>Total:</span>
                                        <strong id="total-price">R$ 0,00</strong>
                                    </div>
                                </div>
                              </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
<footer>
    <div class="footer-content">
        
        <!-- Seção 1: Suporte e Ajuda -->
        <section class="footer__section footer__support">
            <div class="support-info">
                <img src="https://placehold.co/200x200/741b75/FFF?font=montserrat&text=AG" alt="Logo do Suporte Avalia" class="support-icon">
                <span>Suporte</span>
            </div>
            <p>Se precisar de ajuda, entre em contato:</p>
            <a href="mailto:contato@checkout.site" class="support-section__link">
                <i class="fas fa-envelope"></i> contato@checkout.site
            </a>
        </section>

        <!-- Seção 2: Segurança e Confiança -->
        <section class="footer__section footer__trust">
            <div class="info-box__footer-info">
                <h4 class="info-box__footer-title">
                    <i class="fas fa-headset"></i>
                    Central do Cliente
                </h4>
                <p class="info-box__footer-text">
                    A qualquer momento, você pode ver suas compras, acessar seus produtos e solicitar reembolso através da nossa Central.
                </p>
            </div>
            
            <div class="reclame-aqui-badge">
                <a href="#" target="_blank" title="Confira nossa reputação no Reclame Aqui">
                    <div class="badge-content">
                        <img src="https://s3.amazonaws.com/raichu-beta/selos/assets/images/ra-1000.svg" alt="Selo RA 1000 Reclame Aqui" class="badge-icon">
                        <div class="badge-text">
                            <p>RA 1000</p>
                            <span>Reclame <strong>AQUI</strong></span>
                        </div>
                    </div>
                </a>
            </div>
        </section>

        <!-- Seção 3: Informações Legais e Avisos -->
        <section class="footer__section footer__legal">
            <p class="terms">
                TriboPay está processando este pedido à serviço de Suporte Avalia. Ao prosseguir você está concordando com os termos de uso.
            </p>
            <div class="legal-notices">
                <p class="security-notice">
                    <i class="fas fa-lock"></i> Pagamento 100% seguro, processado com criptografia.
                </p>
                <p class="product-notice">
                    <i class="fas fa-info-circle"></i> Produto digital. Os dados de acesso serão enviados por e-mail.
                </p>
            </div>
        </section>

    </div>
</footer>

    <!-- SCRIPTS MOVIDOS PARA O FINAL DO BODY -->
    <!-- Script de Rastreamento UTM (CORRIGIDO) -->
    <script>
    // trakiefy-latest.js v1.0.0 - Seu Utmify 100% grátis e melhor que o original
    // Envolve todo o script em DOMContentLoaded para garantir que o body exista
    document.addEventListener("DOMContentLoaded", () => {
      const keys = ['utm_source','utm_medium','utm_campaign','utm_content','utm_term','gclid','fbclid','ttclid','xcod','sck','src','click_id','cid'];
      const storage = localStorage;
      const expDays = 7 * 24 * 60 * 60 * 1000; // 7 dias

      // 1. Salva todos os parâmetros que chegaram na URL
      new URLSearchParams(location.search).forEach((value, key) => {
        if (keys.includes(key)) {
          storage.setItem(key, value);
          storage.setItem(key + '_exp', Date.now() + expDays);
        }
      });

      // 2. Codifica xcod/sck com caracteres invisíveis
      const encodeInvisible = (str) => str.replace(/[0-9a-f]/gi, c => String.fromCharCode(8203 + parseInt(c, 16)));

      // 3. Restaura UTM em todos os links + injeta xcod/sck no WhatsApp
      const restoreLinks = () => {
        document.querySelectorAll('a[href]').forEach(link => {
          if (!link.href || link.href.includes('mailto:') || link.href.includes('#')) return;

          try {
            const url = new URL(link.href);

            // Restaura UTM normais
            keys.forEach(key => {
              const val = storage.getItem(key);
              const exp = storage.getItem(key + '_exp');
              if (val && exp && Date.now() < +exp) {
                url.searchParams.set(key, val);
              }
            });

            // WhatsApp: injeta xcod/sck codificado no campo text
            if (url.hostname.includes('wa.me') || url.hostname.includes('api.whatsapp.com') || url.hostname.includes('chat.whatsapp.com')) {
              const clickId = storage.getItem('xcod') || storage.getItem('sck') || '';
              if (clickId) {
                const encoded = encodeInvisible(clickId);
                const currentText = url.searchParams.get('text') || 'Olá';
                url.searchParams.set('text', currentText + ' ' + encoded);
              }
            }

            link.href = url.toString();
          } catch (e) {}
        });
      };

      // Executa agora + sempre que mudar o DOM
      restoreLinks();
      // Agora o document.body existe, então o MutationObserver funcionará
      new MutationObserver(restoreLinks).observe(document.body, { childList: true, subtree: true });
      setTimeout(restoreLinks, 1500);
      setTimeout(restoreLinks, 4000);
    });
    </script>
    <script src="js/script.js"></script>
</body>
</html>